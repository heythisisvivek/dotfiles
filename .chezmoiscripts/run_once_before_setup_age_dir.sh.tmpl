#!/bin/bash
set -e

# Define source and destination paths
SOURCE_FILE="$HOME/Chezmoi.key"
DEST_DIR="$HOME/.config/age"
DEST_FILE="$DEST_DIR/Chezmoi.key"

# Check if source file exists
if [ -f "$SOURCE_FILE" ]; then
    echo "Chezmoi.key found in home directory"
    
    # Create destination directory if it doesn't exist
    mkdir -p "$DEST_DIR"

    # Copy the file
    cp "$SOURCE_FILE" "$DEST_FILE"
    
    # Check if copy was successful
    if [ $? -eq 0 ]; then
        echo "Successfully copied Chezmoi.key to $DEST_DIR/"
    else
        echo "Error: Failed to copy Chezmoi.key"
        exit 1
    fi
    
else
    echo "Error: Chezmoi.key not found in home directory"
    echo "Expected location: $SOURCE_FILE"
    exit 1
fi
